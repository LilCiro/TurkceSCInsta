name: Eski Ä°ÅŸ AkÄ±ÅŸÄ± Ã‡alÄ±ÅŸtÄ±rmalarÄ±nÄ± Temizle ğŸ§¹

on:
  workflow_dispatch: # Bu iÅŸ akÄ±ÅŸÄ±nÄ± manuel olarak tetiklemeye izin verir
    inputs:
      days_to_keep:
        description: 'KaÃ§ gÃ¼n Ã¶ncesine kadar Ã§alÄ±ÅŸtÄ±rmalarÄ± saklamak istersiniz? (VarsayÄ±lan: 0 gÃ¼n)'
        required: false
        default: '0'
        type: string
      dry_run:
        description: 'Sadece silecekleri listele (silme iÅŸlemi yapma)? (true/false)'
        required: false
        default: 'true'
        type: boolean
  schedule:
    - cron: '0 0 * * 0' # Her Pazar gece yarÄ±sÄ± (UTC) otomatik olarak Ã§alÄ±ÅŸtÄ±r (isteÄŸe baÄŸlÄ±)

jobs:
  delete_runs:
    runs-on: ubuntu-latest
    permissions:
      contents: none
      actions: write # Ä°ÅŸ akÄ±ÅŸÄ± Ã§alÄ±ÅŸtÄ±rmalarÄ±nÄ± silebilmek iÃ§in bu izne ihtiyaÃ§ duyarÄ±z

    steps:
      - name: Eski Ä°ÅŸ AkÄ±ÅŸÄ± Ã‡alÄ±ÅŸtÄ±rmalarÄ±nÄ± Sil ğŸ—‘ï¸
        uses: kolpav/purge-workflow-runs@v1
        with:
          repository: ${{ github.repository }} # Mevcut depoyu kullan
          retain_days: ${{ github.event.inputs.days_to_keep || 7 }} # Girdiden gelen gÃ¼n sayÄ±sÄ± veya varsayÄ±lan 7 gÃ¼n
          # Buraya virgÃ¼lle ayÄ±rarak hariÃ§ tutulacak iÅŸ akÄ±ÅŸÄ± adlarÄ±nÄ± ekleyebilirsiniz.
          # Ã–rneÄŸin: 'Eski Ä°ÅŸ AkÄ±ÅŸÄ± Ã‡alÄ±ÅŸtÄ±rmalarÄ±nÄ± Temizle' iÅŸ akÄ±ÅŸÄ±nÄ± silmemek iÃ§in
          # workflow_exclude: 'Eski Ä°ÅŸ AkÄ±ÅŸÄ± Ã‡alÄ±ÅŸtÄ±rmalarÄ±nÄ± Temizle'
          min_runs_to_keep: 10 # Her iÅŸ akÄ±ÅŸÄ± iÃ§in en az 10 Ã§alÄ±ÅŸtÄ±rmayÄ± sakla
          dry_run: ${{ github.event.inputs.dry_run }} # manuel tetikleyici input'undan dry_run deÄŸerini al
